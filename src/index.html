<html>
	<head>
		<!-- charset -->
		<meta charset="UTF-8"> 

		<script type="text/javascript">
			var win = nw.Window.get();
			win.showDevTools();
		</script>
		<!-- External common libs-->
		<script type="text/javascript" src="js/lib_external/jquery/jquery.min.js"></script>
		<script type="text/javascript" src="js/lib_external/jquery-ui/jquery-ui.min.js"></script>
		<script type="text/javascript" src="js/lib_external/jquery-layout/stable/jquery.layout.min.js" ></script>
		<script type="text/javascript" src="js/lib_external/contextmenu/contextMenu.js"></script>
		<script type="text/javascript" src="js/lib_external/jszip/jszip.js"></script>
		<script type="text/javascript" src="js/lib_external/jquery-hotkeys/jquery.hotkeys.js"></script>
		<script type="text/javascript" src="js/lib/util/jquery-rotate.js"></script>
		<script type="text/javascript" src="node_modules/jed/jed.js"></script>

		<!-- Internal utils libs -->
		<script type="text/javascript" src="js/lib/util/util.js"></script>
		<script type="text/javascript" src="js/lib/gui/i18n.js"></script>
		<script type="text/javascript" charset="utf-8" async defer>
			CBUtil = new Util();
			let language = 'en';
			if (process.platform.indexOf('win') >= 0 ) {
				language = 'es_ES.UTF-8';
			}
			else if(process.platform.indexOf('linux') >= 0){
				let lang = "";
				let string_languages = [];
				if( process.env.LANG != undefined)
					lang = process.env.LANG.toLowerCase() ;
				if ( process.env.LANGUAGES != undefined )
					string_languages = process.env.LANGUAGES.toLowerCase();
				if (string_languages != ""){
					list_languages = string_languages.split(';');
					for( index in list_languages ){
						if(list_languages[index].indexOf('valencia') >0 || lang.startsWith('ca') ){
							language = "ca_ES.UTF-8@valencia";
							break;
						}
						if(lang.startsWith('es') ){
							language = "es_ES.UTF-8";
							break;
						}
					}
				}
				else{
					if (lang.indexOf('valencia') > 0 || lang.startsWith('ca')){
						language = "ca_ES.UTF-8@valencia";
					}
					else{
						if (lang.startsWith('es')){
							language = "es_ES.UTF-8";
						}

					}
				}

			}
			
			var translationspaht = './i18n/' + language + '.js';
			var fs = require('fs');
			if( ! fs.existsSync(translationspaht)){
				translationspaht = './i18n/en.js';
			}
			CBI18n = new Translator(require(translationspaht));

		</script>

		<script type="text/javascript" src="js/lib/core/backend/core.js"></script>
		<script type="text/javascript" src="js/lib/gui/ui/core.js"></script>
		<script type="text/javascript" src="js/lib/gui/ui/initialwizard/core.js"></script>
		
		<script type="text/javascript" src="js/lib/core/configusermanager.js"></script>
		<script type="text/javascript" src="js/lib/core/controller.js"></script>
		<script type="text/javascript" src="js/lib/core/storagemanager.js"></script>
		<script type="text/javascript" src="js/lib/core/metadatamanager.js"></script>
		<!-- Create Menu -->
		<script type="text/javascript" src="js/lib/gui/dialog.js"></script>
		<script type="text/javascript" src="js/lib/gui/dialogMetadata.js"></script>
		<!-- Imports -->
		<script type="text/javascript" src="js/lib/core/import.js"></script>
		<script type="text/javascript" src="js/lib/core/importMetadata.js"></script>
		<script type="text/javascript" src="js/lib/core/importHTML.js"></script>
		<script type="text/javascript" src="js/lib/core/importPackage.js"></script>
		<script type="text/javascript" src="js/lib/core/importEPUB.js"></script>
		<script type="text/javascript" src="js/lib/core/importELP.js"></script>

        <!--Export-->
        <script type="text/javascript" src="js/lib/gui/ui/exportpdfwizard/core.js"></script>
        <script type="text/javascript" src="js/lib/core/exportPdf.js"></script>

		<!-- Exports -->
		<script type="text/javascript" src="js/lib/core/exportHTML.js"></script>
		<script type="text/javascript" src="js/lib/core/exportHTMLSplit.js"></script>
		<script type="text/javascript" src="js/lib/gui/ui/exporthtmlwizard/core.js"></script>

 		<script type="text/javascript" src="js/lib/gui/ui/exportwebzipwizard/core.js"></script>
 		<script type="text/javascript" src="js/lib/core/exportWebZip.js"></script>

		<script type="text/javascript" src="js/lib/gui/ui/exportepubwizard/core.js"></script>
		<script type="text/javascript" src="js/lib/core/exportEpub.js"></script>

		<script type="text/javascript" src="js/lib/gui/ui/exportscormwizard/core.js"></script>
		<script type="text/javascript" src="js/lib/core/exportScorm.js"></script>

		<script type="text/javascript" src="js/lib/gui/ui/exportimswizard/core.js"></script>
		<script type="text/javascript" src="js/lib/core/exportIms.js"></script>

		<script type="text/javascript" src="js/lib/gui/ui/exportimslrmwizard/core.js"></script>
		<script type="text/javascript" src="js/lib/core/exportImslrm.js"></script>


	</head>
	<body>
	
		<div id="navactions" class="ui-layout-north"></div>
		<div id="navsections" class="ui-layout-west"></div>
		<div id="targetcontent" class="ui-layout-center"></div>
		<div id="statusbar" class="ui-layout-south"></div>

		<!--  Main launcher -->
		<script type="text/javascript" src="js/main.js"></script>
		<script type="text/javascript" src="js/lib/util/debug.js"></script>
	</body>
</html>
